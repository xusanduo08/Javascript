### 你不知道的JS：作用域和闭包

### 第一章：什么是作用域？

目前几乎所有编程语言都具有的一项基础能力之一便是将值存储到变量中，并且能在随后的程序中取出或者修改这些值。这种存储值到变量中并且将值取出来的能力给与了程序一种“状态”。

如果没有上面所说的能力，即使程序依然可以做一些工作，但它们的能力将会受到极大的限制。

上面所说的能力会带来一个问题，那就是：这些变量存储在什么地方？程序是如何发现这些变量以及确定何时需要它们的？

回答这些问题需要一系列定义好的规则以便用来在某区域存储变量和在使用时找到这些变量。我们将这一系列规则称为：__作用域__。

那么，这些规则在什么地方、被如何定义的呢？

#### 编译器理论

根据大家对各种编程语言的了解，有的人觉得这是不证自明的，也有人觉得这非常有趣。尽管Javascript一直被认为是一个“动态的”、“解释型”语言，但事实是Javascript是一个编译型语言。它并不会像其他传统的编译语言一样事先编译好，编译结果也不能在各种分布式系统中完美运行。

但尽管如此，Javascript的引擎还是以一种非常精巧的、难以察觉的方式进行着和传统语言编译器相同的操作。

在传统的编译型语言中，一段代码在被执行前需要经过三个步骤，这三个步骤可以被合称为“编译”：

1.**分词/词法分析**：将一段字符串拆分成有意义的（对语言来说）片段，这些有意义的片段称为token。例如下面一段代码`var a = 2`，这段代码会被拆分成下面几个token：`var`、`a`、`=`、`2`，还有`;`。空格会根据其是否有意义来决定其是否会被保留为一个token。

分词和词法分析之间的区别是微妙和学术性的，但要点主要在这些token是否通过有无状态来标识





<https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/scope%20%26%20closures/ch1.md>