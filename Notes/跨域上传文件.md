#### 跨域上传文件

jsonp是用来解决跨域的比较常见的方法，但是jsonp只能用于get请求，而上传文件又不能用get请求，所以跨域上传文件是肯定不能用jsonp的。

那么还剩下几个方法：

* 使用nginx架设反向代理：这个对于已经上线的产品来说改动有点大，虽然能达到效果，但最好在产品诞生之初就搞。

* 设置跨域请求头：

  ```
  Access-Control-Allow-Origin:发起请求的源地址
  Access-Control-Allow-Methods:发起请求的方法
  ```

nginx架设反向代理的原理在于反向代理后，本来是跨域的，现在都在一个地址下了，就不跨域了。而设置跨域请求头则仍然是跨域的，只是通过在响应消息中加入特殊的请求头来告诉浏览器，允许脚本来获取当前这个请求的返回消息。

注意，跨域时，浏览器是能发出请求的，浏览器也能收到接口返回的消息，但是，__浏览器里运行的js脚本获取不到这个返回消息__。



参考资料：

https://stackoverflow.com/questions/28365417/cross-domain-file-upload-with-jquery