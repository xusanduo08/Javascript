### webpack是如何加载模块的（三）：react是如何实现路由级动态加载的

react实现动态加载官方目前给出的方案有两种，一种是使用`import()`语法，配合loadable-component这个第三方库使用；一种是使用`React.lazy()`。`React.lazy()`目前不支持服务端渲染，如果想在服务端做动态加载只能使用`import()`+loadable-component方法。

实现动态加载首先要做的就代码分割，确定哪些代码需要动态加载。分割的一个标准就是要确保分割后的代码在动态加载时不能影响到用户体验。

**路由级动态加载**就是根据路由来进行代码分割。应用中的代码是按照路由进行分割的，页面路由不同打包时对应的代码就被会被打包到不同文件中，当访问指定路由时，当前路由对应的页面代码就被被动态加载进来。根据路由来进行代码分割的好处就是用户一般习惯于在页面切换的间隙有一定的等待时间，如果在这个等待时间加载代码的话，那么代码加载对用户造成影响会比较小。而且由于在切换页面时用户默认允许一个等待时间，因此也不会对页面上的已经存在元素进行操作，也就避免了一些异常情况的出现。

下面看下loadable-component实现路由级动态加载的逻辑。

通过前面两篇文章的讲解，我们知道，`import(chunkId)`语法在编译后实际变成了下面这个样子：

```javascript
__webpack_require_.e(chunkId).then(__webpack_require.bind(chunkPath))
```

`__webpack_require.e()`：动态加载代码

`__webpack_require.bind(chunkPath)`：运行模块代码，并返回模块导出的内容

以上这些将在下面讲解的时候用到。